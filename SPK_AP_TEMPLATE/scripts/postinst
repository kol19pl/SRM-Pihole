#!/bin/sh


# Ustawienia podstawowe
if [ -z "$SYNOPKG_PKGNAME" ]; then
    PACKAGE_NAME="pi-hole"
    PACKAGE_VER=$(get_key_value "/var/packages/${PACKAGE_NAME}/INFO" "version")
else
    PACKAGE_NAME=$SYNOPKG_PKGNAME
    PACKAGE_VER=$SYNOPKG_PKGVER
fi

# Ścieżki
SCRIPTSPATH="/var/packages/${PACKAGE_NAME}/target/scripts"
APP_PATH="/usr/syno/synoman/webman/3rdparty/$PACKAGE_NAME"
PACKAGE_DIR="/var/packages/${PACKAGE_NAME}"
PACKAGE_ENABLED="/var/packages/${PACKAGE_NAME}/etc/package.cfg"
LOG_FILE="/var/log/pi-hole.log"
SYNO_SERVICE_TOOL="/usr/syno/sbin/synoservice"

# Pobranie wersji DSM
dsm_get_version() {
    local version_file="/etc.defaults/VERSION"
    [ -f "$version_file" ] || { echo "Brak pliku wersji DSM"; return 1; }
    grep -s ^buildnumber ${version_file} | head -1 | awk -F '"' '{print $2}' | tr -d ' '
}
DSM_BUILD_NUM=$(dsm_get_version)
AUTH_API_MIN_SUPPORT=2239





exit 0